# Find Association Rules using the Apriori algorithm

## 1.	APRIORI ALGORITHM
First of all, scan the database once to generate the candidate and frequent itemset of size 1. 

In the while function, run `generate_candidate` function to generate candidate k-itemset using frequent (k-1) itemset and `generate_frequent` function to generate frequent k-itemset using  candidate k-itemset. And these frequent k-itemset  would be added to the list of frequent itemset which represents the total of frequent itemset. The while function would be ended when candidate or frequent itemset does not generated any more. 

After finding all of frequent itemset, it calculates the support and confidence of all of subsets in frequent itemset. And then, it stores those information in output file. 

## 2.	DESCRIPTION OF FUNCTIONS
-	`create_first_candidate` function

`create_first_candidate` function takes a database of transactions as input. And it returns a dictionary of candidate 1-itemset which has support count as value.
This function investigates the support count for each itemset of size 1. To find the support count of itemset, it counts the number of transactions which have it from the database.

-	`generate_candidate` function

`generate_candidate` function takes k, the size of candidate itemset that will be generated, frequent (k-1)-itemset list and frequent (k-1)-itemset dictionary containing support count as value.  And it returns a list of candidate k-itemset list and a dictionary of candidate-k-itemset which has support count as value.
At first, candidate itemset is generated by joining subset of frequent (k-1)-itemset . It should be joined with lexicographic order. And then, it checks whether the candidate is included in frequent (k-1)-itemset to remove unfruitful candidate using `has_infrequent_subset` function. If the subset of candidate is not in frequent (k-1)-itemset , it should be deleted. Or not, it is added to a list of candidate k-itemset and a dictionary of candidate k-itemset which has support count as value. 

-	`has_infrequent_subset` function

`has_infrequent_subset` function takes sorted candidate, frequent (k-1)-itemset, and the size of  . It returns `True` if candidate 
`has_infrequent_subset` function takes k, the size of candidate itemset that will be generated, a candidate itemset of size k, and frequent (k-1)-itemset dictionary containing support count as value. 
If any (k-1)-subset of a candidate k-itemset is not in frequent (k-1)-itemset, then the candidate cannot be frequent either and so it will return `True`. Or not, it returns `False`.

-	`get_support_count_from_db` function

`get_support_count_from_db` function takes a candidate k-itemset as input. And It returns support count of this itemset from a database.
This function is used for finding support count of candidate k-itemset from the database to distinguish whether it can be a frequent k-itemset. To get support count, it counts the number of transactions which have this candidate k-itemset from the database. 

-	`generate_frequent` function

`generate_frequent` function takes a dictionary of candidate k-itemset which has support count for value as input. And it returns a list of frequent k-itemset and a dictionary of frequent k-itemset which has support count as value. 
This function investigates all of candidate k-itemset which can be frequent k-itemset by comparing the support count of candidate k-itemset with the minimum support. If the support count of candidate k-itemset is larger than the minimum support, it would be appended to a list of frequent k-itemset and a dictionary of frequent k-itemset with the support count. 

-	`get_nonempty_subsets` function

`get_nonempty_subsets` function takes a list of itemset as input . And it returns a list of all of nonempty subsets of the itemset. 
This function is used for finding support and confidence of all of subsets in frequent itemset. 

-	`calculate_support_confidence` function

`calculate_support_confidence` function takes a dictionary of frequent itemset containing support count as value, itemset_a and itemset_b which are itemset that we want to calculate support and confidence as input. It returns relative support and confidence of itemset_a and itemset_b. 
Support is calculated as the number of transactions which have both of itemset_a and itemset_b by using union set method. Confidence is calculated as the conditional probability which is the probability that transaction containing itemset_a  also contains itemset_b. The support count is found from a dictionary of frequent itemset containing support count as value.  

## 3.	HOW TO RUN CODE
I wrote it with python3 of which version is 3.6.6. 
Put the apriori.py code fild and input.txt file in same directory.
Run `python3 min_support input_txt output_txt` 
The output.txt file will be generated in the same directory. 
 


